<h2>Add Milestones</h2>

<%= form_for @goal, :url => add_milestones_path(@goal) do |f| -%>
	<% if @goal.errors.any? %>
		<div id="error_explanation">
			<h2><%= pluralize(@goal.errors.count, "error") %> prohibited these milestones from being added:</h2>

			<ul>
			<% @goal.errors.full_messages.each do |msg| %>
				<li><%= msg %></li>
			<% end %>
			</ul>
		</div>
	<% end %>

	<% @goal.milestones.each_with_index do |milestone, index| %>
		<%= fields_for "milestones[#{index}]", milestone do |m| %>
			<p><%= m.label :name %><br />
			<%= m.text_field :name %></p>

		  <p><%= m.label :timeline, "Deadline" %><br />
			<%= m.date_select :timeline, :add_month_numbers => true %></p>
		<% end %>
	<% end %>
		
	<p class="button"><%= f.submit "Add milestones" %></p>
<% end -%>